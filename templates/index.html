<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Keenroute</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  <link rel="icon" href="{{ url_for('static', filename='icons/icon-192x192.png') }}">
</head>
<body>
  <div class="theme-toggle">
    <button type="button" onclick="toggleTheme()">üåô / üåû</button>
  </div>

  <div class="container">
    <h2>Keenroute</h2>

    <form method="POST">
      <label for="route_type">–¢–∏–ø –º–∞—Ä—à—Ä—É—Ç–∞:</label>
      <select id="route_type" name="route_type" required>
        <option value="host">–ú–∞—Ä—à—Ä—É—Ç –¥–æ —É–∑–ª–∞</option>
        <option value="network">–ú–∞—Ä—à—Ä—É—Ç –¥–æ —Å–µ—Ç–∏</option>
        <option value="default">–ú–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
      </select>

      <label for="sites">–°–∞–π—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
      <textarea id="sites" name="sites" required></textarea>

      <div class="row">
        <div>
          <label for="gateway">–®–ª—é–∑:</label>
          <input type="text" id="gateway" name="gateway" placeholder="192.168.1.1">
        </div>
        <div>
          <label for="netmask">–ú–∞—Å–∫–∞ —Å–µ—Ç–∏:</label>
          <input type="text" id="netmask" name="netmask" placeholder="255.255.255.0">
        </div>
      </div>

      <div class="checkbox-row">
        <label>
          <input type="checkbox" name="ipv6"> –í–∫–ª—é—á–∏—Ç—å IPv6
        </label>
      </div>

      <div class="buttons">
        <button type="submit">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
    </form>

    {% if cfg_output %}
      <h3>CFG –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</h3>
      <pre><code id="cfg">{{ cfg_output }}</code></pre>
      <button class="copy-btn" onclick="copyText('cfg')">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    {% endif %}

    {% if json_output %}
      <h3>JSON –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</h3>
      <pre><code id="json">{{ json_output }}</code></pre>
      <button class="copy-btn" onclick="copyText('json')">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    {% endif %}
  </div>

  <script>
    function copyText(id) {
      const text = document.getElementById(id).innerText;
      navigator.clipboard.writeText(text);
      alert("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!");
    }

    // –¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
    function toggleTheme() {
      document.body.classList.toggle("dark");
      localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
    }
    window.onload = function() {
      if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark");
      }
    }
  </script>
</body>
</html>
